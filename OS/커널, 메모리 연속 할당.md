# 커널, 연속 메모리 할당

---

## os에서 커널이란?

- 하드웨어와 애플리케이션 사이의 인터페이스를 제공하며 cpu, 메모리 등 컴퓨터 자원을 관리하는 운영체제의 일부.
- 프로세스 관리, 메모리 관리, 파일 시스템, 네트워크 관리, 인터럽트 핸들링 등.

### 커널의 구조인 모놀리식 커널과 마이크로 커널은 무엇인가?

- 모놀리식 커널

  - virtual file system, interprocess communication, file system 등 모두를 커널이 직접 처리하는 방식.
  - 시스템 자원 공유가 쉬워 속도가 빠르다.
  - 한 오류가 치명적으로 작용할 수 있다. 디바이스 드라이버 추가, 삭제시 커널을 재빌드해야 한다.
  - 리눅스 등이 있다.
  - 현재는 여러 모듈로 구성되어 유지보수가 쉬워졌다.

- 마이크로 커널
  - 핵심 서비스(스케줄링, 메모리, 네트워크 관련)를 제외한 커널. 다른 서비스는 개별 서버로 존재.
  - 한 서비스가 다운되어도 전체에 대한 영향이 제한적.
  - 유지보수가 용이
  - 커널 내부 지연이 적고 예측 가능하기 때문에 리얼타임 시스템에서 효과적.
  - interprocess comunication이 잦기 때문에 메시지 전송, 컨텍스트 스위칭 잦음.
  - 맥 등

---

## 프로세스를 메모리에 적재할 때 주소 공간을 연속적으로 할당하는 경우를 설명하라.

- 연속 할당 : 주소 공간을 한 곳에 연속적을 할당. 물리 메모리를 여럿으로 분할하여 그 중 하나를 프로세스에게 할당한다.

## 메모리를 프로세스에 할당할 때 메모리의 크기를 고정적으로 할당하는 경우와 가변적으로 할당하는 경우를 설명하라

- 고정 분할

  - 물리 메모리를 정해진 영구적 분할로 나누고 각각에 한 프로세스를 적재하는 방식. 각 분할의 크기는 서로 다를 수 있다.
  - 동시에 메모리에 적재 가능한 프로그램 수가 정해져 있으며, 적재 가능한 프로세스의 최대 크기가 제한된다.(가장 큰 분할보다 큰 메모리를 요구하는 프로세스 적재 불가) -> external fragmentation
  - 반대로 너무 큰 분할을 할당하며 internal fragmentation 발생 가능.

  - 큐를 통해 메모리에 적재할 프로세스를 정하는데, 두 가지 방법이 있다.
    - 분할 영역 별 대기 큐 : 분할된 영역마다 큐가 있고 큐 간 이동이 불가능해 메모리에 빈 공간이 있어도 이용할 수 없다.
    - 통합 대기 큐 : 하나의 큐를 이용.

- 가변 분할

  - 분할의 크기, 개수가 동적인 방식.
  - internal fragmentaion이 해결되나 external fragmentation이 존재.
  - external fragmentation 해결을 위해 압축(compaction)을 할 수 있다. 사용 중인 공간을 한 쪽으로 밀어 공간을 확보하는 것으로 프로세스가 중지되기에 효율이 나쁘다.
  - 인접한 외부 공간을 합하는 것을 통합(coalescing)이라고 한다.

  - 어느 메모리 공간을 선택해야 하는지의 문제가 발생
  - first fit(최초 적합) : 가장 먼저 발견한 가용 메모리 공간을 사용. 빠르다.
  - best fit(최적 적합) : 사용 가능한 공간 중 가장 작은 것을 사용. external fragmentation 유발.
  - worst fit(최악 적합) : 가장 큰 메모리 공간을 사용. external fragmentation이 넓기에 최적 적합보다 낫다.
