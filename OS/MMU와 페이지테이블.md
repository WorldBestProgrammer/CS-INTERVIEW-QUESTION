
# MMU가 어떤과정으로 가상주소를 물리주소로 변환해주나요?

- 프로세스의 명령을 cpu가 MMU에게 가상메모리 주소로 하달하면,
- MMU는 해당 가상 메모리 주소를 변환하기 위해
- 우선 TLB 캐시를 참조합니다.
- 해당 캐시에 참조하고자 하는 페이지가 존재한다면
- TLB HIT! 되고 물리주소가 리턴된다.
- 만약 찾지 못했다면(TLB MISS! 라면)
- 페이지테이블에서 해당 주소를 찾는다. 있다면
- 그 값을 참조하고, 없다면(페이지 폴트)
- disk까지 내려가서 메모리상에 페이지를 올려놓고 참조하도록 한다.

# 꼬리질문
# 페이지테이블에서 해당 주소를 찾는다고 하셨는데,
# 2단계 페이지테이블은 어떤 구조를 갖고 있나요?

- 2단계 페이지 테이블의 상위(Outer) 테이블은
- 하위(Inner) 페이지테이블의 주소를 가리키고 있는 구조로 되어있습니다.

# 꼬리질문
# 그러면 왜 2단계 페이지테이블을 사용할까요? 어떤 장단점?

- 만약 모든 페이지를 하나의 페이지테이블에 담는다고 한다면,
- 예를들어 4GB 짜리 가상 메모리를 사용하는 프로세스의 경우
- 4KB 단위의 페이지를 사용한다고 가정할때 1M개의 페이지 개수가 필요하다.
- 이 페이지들을 모두 적재하는것은 또다시 메모리 공간을 너무 많이 차지한다
- 그에 반해 2단계 페이지테이블을 사용하면 사용하지 않는 InnerTable을 
- 가리키는 OuterTable의 주소는 null값을 두어 메모리를 아낄 수 있다.

- 다만 주소 변환에 있어 2단계를 거치기 때문에 더 느리다는 단점이 있습니다.

